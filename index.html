<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MÄ°M Raporlama â€¢ 2025 Wrapped</title>

  <!-- Fontlar -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    :root{
      /* BBVA baz */
      --bbva:#004481;
      --bbva2:#1464A5;
      --bbva3:#2DCCCD;

      /* YÄ±lbaÅŸÄ± paleti */
      --red:#D61F26;
      --green:#1F7A4A;
      --gold:#F6C343;
      --snow:#F7FBFF;
      --ink:#0b1b2b;

      --card: rgba(255,255,255,.82);
      --cardBorder: rgba(0,0,0,.08);
      --shadow: 0 22px 55px rgba(0, 0, 0, .14);
      --radius: 26px;

      /* aktif tema renkleri JS tarafÄ±ndan set edilir */
      --bgA: #EAF3FF;
      --bgB: #F4FBFF;
      --bgC: rgba(45,204,205,.18);
      --bgD: rgba(20,100,165,.14);
      --text: var(--ink);
      --muted: rgba(11,27,43,.72);
    }

    *{ box-sizing: border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(900px 650px at 15% 10%, var(--bgC), transparent 60%),
        radial-gradient(900px 650px at 85% 20%, var(--bgD), transparent 55%),
        linear-gradient(180deg, var(--bgA), var(--bgB));
      overflow: hidden;
      transition: background 600ms ease;
    }

    .wrap{
      height: 100vh;
      overflow-y: auto;
      scroll-snap-type: y mandatory;
      -webkit-overflow-scrolling: touch;
    }

    .panel{
      height: 100vh;
      scroll-snap-align: start;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px 18px;
      position: relative;
    }

    /* Foto paneli: panel biraz daha uzun olsun, sayfayÄ± aÅŸaÄŸÄ± kaydÄ±rÄ±nca aynÄ± panel iÃ§inde devam et */
    .panel.tall{
      height: auto;
      min-height: 100vh;
      align-items: flex-start;
      padding-bottom: 140px; /* canvas aÅŸaÄŸÄ±da kalsa bile eriÅŸ */
    }
    .panel.tall .card{
      max-height: none;
      overflow: hidden; /* kart iÃ§inde ayrÄ± scroll olmasÄ±n */
    }

    /* Sade-ÅŸÄ±k kar + Ã§ok hafif konfeti */
    .panel::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:.30;
      background-image:
        radial-gradient(circle at 12% 18%, rgba(255,255,255,.92) 0 1px, transparent 2px),
        radial-gradient(circle at 62% 28%, rgba(255,255,255,.80) 0 1px, transparent 2px),
        radial-gradient(circle at 22% 72%, rgba(255,255,255,.70) 0 1px, transparent 2px),
        radial-gradient(circle at 78% 82%, rgba(255,255,255,.88) 0 1px, transparent 2px),
        radial-gradient(circle at 30% 20%, rgba(246,195,67,.78) 0 1px, transparent 2px),
        radial-gradient(circle at 70% 60%, rgba(214,31,38,.70) 0 1px, transparent 2px),
        radial-gradient(circle at 40% 85%, rgba(31,122,74,.62) 0 1px, transparent 2px);
      background-size: 240px 240px, 280px 280px, 260px 260px, 300px 300px, 360px 360px, 420px 420px, 480px 480px;
      animation: drift 14s linear infinite;
    }
    @keyframes drift{
      0%{ background-position: 0 0, 0 0, 0 0, 0 0, 0 0, 0 0, 0 0; }
      100%{ background-position: 0 360px, 0 460px, 0 420px, 0 500px, 0 260px, 0 320px, 0 380px; }
    }

    .card{
      width: min(940px, 92vw);
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,.66));
      border: 1px solid var(--cardBorder);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 26px;
      position: relative;
      overflow: hidden;
    }

    /* KartÄ±n Ã¼stÃ¼nde sade yÄ±lbaÅŸÄ± Ã§elengi (sÃ¼s ipi) */
    .card::before{
      content:"";
      position:absolute;
      left:-40px; right:-40px;
      top:-26px;
      height: 90px;
      pointer-events:none;
      background:
        radial-gradient(circle at 12% 70%, rgba(31,122,74,.35) 0 18px, transparent 19px),
        radial-gradient(circle at 18% 55%, rgba(31,122,74,.22) 0 14px, transparent 15px),
        radial-gradient(circle at 24% 70%, rgba(31,122,74,.35) 0 18px, transparent 19px),
        radial-gradient(circle at 30% 55%, rgba(31,122,74,.22) 0 14px, transparent 15px),
        radial-gradient(circle at 36% 70%, rgba(31,122,74,.35) 0 18px, transparent 19px),
        radial-gradient(circle at 42% 55%, rgba(31,122,74,.22) 0 14px, transparent 15px),
        radial-gradient(circle at 48% 70%, rgba(31,122,74,.35) 0 18px, transparent 19px),
        radial-gradient(circle at 54% 55%, rgba(31,122,74,.22) 0 14px, transparent 15px),
        radial-gradient(circle at 60% 70%, rgba(31,122,74,.35) 0 18px, transparent 19px),
        radial-gradient(circle at 66% 55%, rgba(31,122,74,.22) 0 14px, transparent 15px),
        radial-gradient(circle at 72% 70%, rgba(31,122,74,.35) 0 18px, transparent 19px),
        radial-gradient(circle at 78% 55%, rgba(31,122,74,.22) 0 14px, transparent 15px),
        radial-gradient(circle at 84% 70%, rgba(31,122,74,.35) 0 18px, transparent 19px),
        radial-gradient(circle at 90% 55%, rgba(31,122,74,.22) 0 14px, transparent 15px);
      opacity:.58;
      filter: blur(.2px);
    }

    .card::after{
      content:"";
      position:absolute;
      inset:-2px;
      pointer-events:none;
      background:
        radial-gradient(900px 280px at 10% 10%, rgba(45,204,205,.14), transparent 55%),
        radial-gradient(800px 260px at 90% 15%, rgba(20,100,165,.12), transparent 55%),
        radial-gradient(700px 220px at 55% 110%, rgba(246,195,67,.12), transparent 60%);
    }

    .stack{ position: relative; z-index: 1; }

    .kicker{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(0,0,0,.08);
      color: rgba(11,27,43,.74);
      font-weight: 800;
      font-size: 13px;
      backdrop-filter: blur(6px);
    }

    .dot{
      width:10px; height:10px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--bbva2), var(--bbva3));
      box-shadow: 0 0 0 6px rgba(20,100,165,.10);
    }

    h1{
      margin: 16px 0 10px;
      font-size: clamp(32px, 5.2vw, 62px);
      line-height: 1.02;
      letter-spacing: -0.02em;
    }

    .sub{
      margin: 0;
      color: var(--muted);
      font-size: clamp(15px, 2.1vw, 18px);
      line-height: 1.55;
      max-width: 72ch;
    }

    .hint{
      margin-top: 18px;
      display:flex;
      align-items:center;
      gap: 12px;
      color: rgba(11,27,43,.62);
      font-size: 14px;
      font-weight: 700;
    }

    .chev{
      width: 12px; height: 12px;
      border-right: 2px solid rgba(11,27,43,.55);
      border-bottom: 2px solid rgba(11,27,43,.55);
      transform: rotate(45deg);
      animation: bounce 1.2s ease-in-out infinite;
    }

    @keyframes bounce{
      0%,100%{ transform: translateY(0) rotate(45deg); opacity:.85; }
      50%{ transform: translateY(6px) rotate(45deg); opacity:1; }
    }

    .stat{ display:flex; flex-direction: column; gap: 10px; }

    .big{
      font-size: clamp(42px, 8vw, 92px);
      font-weight: 900;
      letter-spacing: -0.03em;
      line-height: 0.95;
      margin: 10px 0 2px;
      background: linear-gradient(90deg, var(--bbva), var(--bbva2), var(--bbva3));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .big .plus{ color: rgba(0,68,129,.85); }

    .label{
      font-size: clamp(16px, 2.4vw, 22px);
      color: rgba(11,27,43,.90);
      line-height: 1.35;
    }

    .meta{
      margin-top: 14px;
      color: rgba(11,27,43,.64);
      font-size: 13px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .pill{
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(0,0,0,.08);
      backdrop-filter: blur(6px);
    }

    .values .lead{
      font-size: clamp(18px, 2.6vw, 22px);
      color: rgba(11,27,43,.82);
      line-height: 1.6;
      max-width: 72ch;
    }
    .values .together{
      margin-top: 18px;
      font-size: clamp(34px, 6vw, 78px);
      font-weight: 900;
      letter-spacing: -0.04em;
      text-transform: uppercase;
      background: linear-gradient(90deg, var(--green), var(--gold), var(--red));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* FotoÄŸraf alanÄ± */
    .photo-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin-top: 14px;
    }
    @media (min-width: 900px){
      .photo-grid{ grid-template-columns: 1.1fr .9fr; align-items: start; }
    }

    .controls, .preview{
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 20px;
      padding: 16px;
      backdrop-filter: blur(8px);
    }

    .controls h3{ margin: 0 0 10px; font-size: 16px; }
    .controls p{ margin: 0 0 12px; color: rgba(11,27,43,.72); line-height: 1.5; font-size: 14px; }

    .row{ display:flex; gap: 10px; flex-wrap: wrap; align-items:center; }

    input[type=file]{
      width: 100%;
      padding: 12px;
      border-radius: 14px;
      border: 1px dashed rgba(0,0,0,.22);
      background: rgba(247,251,255,.85);
      color: rgba(11,27,43,.90);
    }

    button{
      appearance: none;
      border: 0;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 900;
      cursor: pointer;
      color: white;
      background: linear-gradient(135deg, var(--bbva), var(--bbva2));
      box-shadow: 0 14px 30px rgba(0,0,0,.14);
    }
    button.secondary{
      background: linear-gradient(135deg, rgba(31,122,74,.16), rgba(246,195,67,.18));
      color: rgba(11,27,43,.90);
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: none;
    }
    button:disabled{ opacity:.5; cursor:not-allowed; }

    .controlline{ display:flex; gap:12px; align-items:center; margin-top: 10px; }
    .controlline label{ font-size: 12px; color: rgba(11,27,43,.70); font-weight: 800; width: 70px; }
    .controlline input[type=range]{ width: 100%; }

    canvas{
      width: 100%;
      max-width: 520px;
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.85);
    }

    .tiny{ font-size: 12px; color: rgba(11,27,43,.62); line-height: 1.45; }

    .footer{
      margin-top: 12px;
      color: rgba(11,27,43,.55);
      font-size: 12px;
      display:flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
  </style>
</head>

<body>
  <div class="wrap" id="wrap">

    <!-- 1) Kapak -->
    <section class="panel" data-theme="0">
      <div class="card">
        <div class="stack">
          <div class="kicker"><span class="dot"></span> 2025 â€¢ MÄ°M Raporlama Wrapped</div>
          <h1>Rakamlarla bir yÄ±lâ€¦<br/>ve arkasÄ±ndaki emek.</h1>
          <p class="sub">
            AÅŸaÄŸÄ± kaydÄ±rdÄ±kÃ§a 2025 boyunca birlikte neler baÅŸardÄ±ÄŸÄ±mÄ±zÄ± gÃ¶receksin.
            (Spotify Wrapped gibi dÃ¼ÅŸÃ¼nebilirsin ğŸ™‚)
          </p>
          <div class="hint"><span class="chev"></span> KaydÄ±r</div>
        </div>
      </div>
    </section>

    <!-- 2) Stat 1 -->
    <section class="panel" data-theme="1">
      <div class="card"><div class="stack stat">
        <div class="kicker"><span class="dot"></span> 2025 Ã–zeti â€¢ 1/7</div>
        <div class="big"><span class="count" data-target="10000">0</span><span class="plus">+</span></div>
        <div class="label">2025 yÄ±lÄ±nda <b>10.000+</b> rapor hazÄ±rladÄ±k.</div>
        <div class="meta"><span class="pill">Raporlama</span><span class="pill">Analiz</span><span class="pill">SÃ¼reÃ§ takibi</span></div>
      </div></div>
    </section>

    <!-- 3) Stat 2 -->
    <section class="panel" data-theme="2">
      <div class="card"><div class="stack stat">
        <div class="kicker"><span class="dot"></span> 2025 Ã–zeti â€¢ 2/7</div>
        <div class="big"><span class="count" data-target="8000">0</span><span class="plus">+</span></div>
        <div class="label"><b>8.000+</b> raporu e-posta ile paylaÅŸtÄ±k.</div>
        <div class="meta"><span class="pill">PaylaÅŸÄ±m</span><span class="pill">Ekip Ã§alÄ±ÅŸmasÄ±</span><span class="pill">HÄ±z</span></div>
      </div></div>
    </section>

    <!-- 4) Stat 3 -->
    <section class="panel" data-theme="3">
      <div class="card"><div class="stack stat">
        <div class="kicker"><span class="dot"></span> 2025 Ã–zeti â€¢ 3/7</div>
        <div class="big"><span class="count" data-target="3000">0</span><span class="plus">+</span></div>
        <div class="label"><b>3.000+</b> talebi zamanÄ±nda karÅŸÄ±ladÄ±k.</div>
        <div class="meta"><span class="pill">Talep yÃ¶netimi</span><span class="pill">SLA</span><span class="pill">Ã‡Ã¶zÃ¼m</span></div>
      </div></div>
    </section>

    <!-- 5) Stat 4 -->
    <section class="panel" data-theme="4">
      <div class="card"><div class="stack stat">
        <div class="kicker"><span class="dot"></span> 2025 Ã–zeti â€¢ 4/7</div>
        <div class="big"><span class="count" data-target="6000">0</span><span class="plus">+</span></div>
        <div class="label">Her gÃ¼n baÄŸlÄ±lÄ±klarÄ± MÃ¼ÅŸteri Ä°letiÅŸim Merkeziâ€™nde olan <b>6.000+</b> personelin tÃ¼m Ã§aÄŸrÄ± verilerine ulaÅŸtÄ±k.</div>
        <div class="meta"><span class="pill">Ã‡aÄŸrÄ± verisi</span><span class="pill">Operasyon</span><span class="pill">Takip</span></div>
      </div></div>
    </section>

    <!-- 6) Stat 5 -->
    <section class="panel" data-theme="5">
      <div class="card"><div class="stack stat">
        <div class="kicker"><span class="dot"></span> 2025 Ã–zeti â€¢ 5/7</div>
        <div class="big"><span class="count" data-target="100">0</span><span class="plus">%</span></div>
        <div class="label">TÃ¼m satÄ±ÅŸ adetlerini hesapladÄ±k; raporlardan aksiyona giden yolu gÃ¶rÃ¼nÃ¼r kÄ±ldÄ±k.</div>
        <div class="meta"><span class="pill">SatÄ±ÅŸ</span><span class="pill">Performans</span><span class="pill">GÃ¶rÃ¼nÃ¼rlÃ¼k</span></div>
        <p class="tiny">Not: Buradaki yÃ¼zde bir â€œvurguâ€ alanÄ±. Ä°stersen bunu gerÃ§ek bir sayÄ±ya (Ã¶rn. 1.200.000+) Ã§evirebilirsin.</p>
      </div></div>
    </section>

    <!-- 7) EÄŸitimler -->
    <section class="panel" data-theme="6">
      <div class="card"><div class="stack stat">
        <div class="kicker"><span class="dot"></span> 2025 Ã–zeti â€¢ 6/7</div>
        <div class="big"><span class="count" data-target="60">0</span><span class="plus">+</span></div>
        <div class="label"><b>60+</b> eÄŸitim grubuna ve <b>10+</b> yeni yetkiliye eÄŸitim verdik.</div>
        <div class="meta"><span class="pill">EÄŸitim</span><span class="pill">PaylaÅŸÄ±m</span><span class="pill">Standart</span></div>
      </div></div>
    </section>

    <!-- 8) Qlik Sense -->
    <section class="panel" data-theme="7">
      <div class="card"><div class="stack stat">
        <div class="kicker"><span class="dot"></span> 2025 Ã–zeti â€¢ 7/7</div>
        <div class="big"><span class="count" data-target="10">0</span><span class="plus">+</span></div>
        <div class="label"><b>10+</b> dÃ¼zenli raporumuzu Qlik Sense Ã¼zerinden servis etmeye hazÄ±rÄ±z.</div>
        <div class="meta"><span class="pill">Qlik Sense</span><span class="pill">Self-servis</span><span class="pill">HazÄ±rlÄ±k</span></div>
      </div></div>
    </section>

    <!-- 9) TeÅŸekkÃ¼r -->
    <section class="panel" data-theme="8">
      <div class="card">
        <div class="stack values">
          <div class="kicker"><span class="dot"></span> TeÅŸekkÃ¼r</div>
          <h1>Ä°ÅŸimiz rakamlarlaâ€¦</h1>
          <p class="lead">TÃ¼m iÅŸimiz adetlere ve analizlere dayansa da, bizi birbirimize baÄŸlayan ÅŸey her zaman <b>deÄŸerlerimiz</b> oldu.</p>
          <div class="together">BÄ°RLÄ°KTE YAPARIZ.</div>
          <div class="hint" style="margin-top:18px;"><span class="chev"></span> Bir sÃ¼rpriz daha var</div>
        </div>
      </div>
    </section>

    <!-- 10) FotoÄŸraf HatÄ±rasÄ± -->
    <section class="panel tall" data-theme="9">
      <div class="card">
        <div class="stack">
          <div class="kicker"><span class="dot"></span> YÄ±lbaÅŸÄ± HatÄ±rasÄ±</div>
          <h1>FotoÄŸrafÄ±nÄ± ekle ğŸ„</h1>
          <p class="sub">
            FotoÄŸrafÄ±n kenarlarÄ±nÄ± fazla kÄ±rpmamak iÃ§in arka planda fotoÄŸrafÄ±n bulanÄ±k bir versiyonunu kullanÄ±yoruz; Ã¶nde ise fotoÄŸrafÄ±n tamamÄ±nÄ± (fit) yerleÅŸtiriyoruz.
          </p>

          <div class="photo-grid">
            <div class="controls">
              <h3>1) FotoÄŸraf seÃ§</h3>
              <p>Mobilde aÃ§arsan kamera seÃ§eneÄŸi de Ã§Ä±kabilir. (Cihaza gÃ¶re â€œFotoÄŸraf Ã§ekâ€ olarak gÃ¶rÃ¼nÃ¼r.)</p>
              <input id="file" type="file" accept="image/*" capture="environment" />

              <div style="height:10px"></div>
              <h3>2) Kadraj (isteÄŸe baÄŸlÄ±)</h3>
              <p>Ä°stersen fotoÄŸrafÄ± biraz bÃ¼yÃ¼tÃ¼p/konumlandÄ±rabilirsin.</p>
              <div class="controlline"><label>YakÄ±nlÄ±k</label><input id="zoom" type="range" min="1" max="1.6" step="0.01" value="1"></div>
              <div class="controlline"><label>Yatay</label><input id="panX" type="range" min="-1" max="1" step="0.01" value="0"></div>
              <div class="controlline"><label>Dikey</label><input id="panY" type="range" min="-1" max="1" step="0.01" value="0"></div>

              <div style="height:12px"></div>
              <h3>3) OluÅŸtur & indir</h3>
              <p>Ã–nizleme hazÄ±r olduÄŸunda â€œÄ°ndirâ€ butonu aktif olacak.</p>
              <div class="row">
                <button id="make" class="secondary" disabled>OluÅŸtur</button>
                <button id="download" disabled>Ä°ndir</button>
              </div>

              <div style="height:12px"></div>
              <p class="tiny">Ä°ndirme engellenirse ekran gÃ¶rÃ¼ntÃ¼sÃ¼ de alabilirsin.</p>
            </div>

            <div class="preview">
              <strong>Ã–nizleme</strong>
              <canvas id="canvas" width="1080" height="1080" aria-label="YÄ±lbaÅŸÄ± hatÄ±rasÄ± gÃ¶rseli"></canvas>
              <div class="tiny">Ä°pucu: â€œYakÄ±nlÄ±kâ€ 1.0 iken fotoÄŸraf kÄ±rpÄ±lmaz; bÃ¼yÃ¼ttÃ¼kÃ§e kÄ±rpma baÅŸlar.</div>
            </div>
          </div>

          <div class="footer">
            <span>Â© MÄ°M Raporlama</span>
            <span>Mutlu yÄ±llar! âœ¨</span>
          </div>
        </div>
      </div>
    </section>

  </div>

  <script>
    // --- Tema: her panelde farklÄ± arka plan ---
    const themes = [
      // 0 Kapak (BBVA canlÄ±)
      { bgA:'#E6F2FF', bgB:'#FFFFFF', bgC:'rgba(45,204,205,.40)', bgD:'rgba(20,100,165,.32)' },
      // 1 Mavi + AltÄ±n (daha sÄ±cak)
      { bgA:'#EAF3FF', bgB:'#FFF2C9', bgC:'rgba(246,195,67,.42)', bgD:'rgba(0,68,129,.28)' },
      // 2 Turkuaz patlama
      { bgA:'#D9FFFB', bgB:'#EAF3FF', bgC:'rgba(45,204,205,.46)', bgD:'rgba(20,100,165,.24)' },
      // 3 KÄ±rmÄ±zÄ± ÅŸeker (candy)
      { bgA:'#FFE3E6', bgB:'#FFF7F8', bgC:'rgba(214,31,38,.40)', bgD:'rgba(246,195,67,.22)' },
      // 4 YeÅŸil Ã§am + altÄ±n
      { bgA:'#DBFFEA', bgB:'#FFF6DB', bgC:'rgba(31,122,74,.38)', bgD:'rgba(246,195,67,.24)' },
      // 5 Gece mavi ama â€œneonâ€ turkuaz
      { bgA:'#E1ECFF', bgB:'#E8FFFE', bgC:'rgba(0,68,129,.28)', bgD:'rgba(45,204,205,.40)' },
      // 6 EÄŸitim (altÄ±n baskÄ±n)
      { bgA:'#FFF0B8', bgB:'#E7FFF9', bgC:'rgba(246,195,67,.48)', bgD:'rgba(45,204,205,.26)' },
      // 7 Qlik (BBVA2 baskÄ±n)
      { bgA:'#DCEBFF', bgB:'#E8FFFE', bgC:'rgba(20,100,165,.36)', bgD:'rgba(45,204,205,.36)' },
      // 8 TeÅŸekkÃ¼r (kÄ±rmÄ±zÄ±/yeÅŸil daha belirgin)
      { bgA:'#FFF0F2', bgB:'#E7FFEF', bgC:'rgba(31,122,74,.32)', bgD:'rgba(214,31,38,.30)' },
      // 9 Foto (kÄ±ÅŸ + altÄ±n)
      { bgA:'#F7FBFF', bgB:'#E6F2FF', bgC:'rgba(246,195,67,.28)', bgD:'rgba(20,100,165,.28)' },
    ];

    function applyTheme(i){
      const t = themes[Math.max(0, Math.min(themes.length-1, i))];
      const r = document.documentElement.style;
      r.setProperty('--bgA', t.bgA);
      r.setProperty('--bgB', t.bgB);
      r.setProperty('--bgC', t.bgC);
      r.setProperty('--bgD', t.bgD);
    }

    // --- SayÄ± animasyonu ---
    const easeOutCubic = (t) => 1 - Math.pow(1 - t, 3);
    function animateCount(el){
      const target = Number(el.dataset.target || '0');
      const duration = 1100;
      const t0 = performance.now();
      function frame(now){
        const t = Math.min(1, (now - t0) / duration);
        const val = Math.round(target * easeOutCubic(t));
        el.textContent = val.toLocaleString('tr-TR');
        if(t < 1) requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);
    }

    const panelIO = new IntersectionObserver((entries) => {
      for(const e of entries){
        if(e.isIntersecting){
          const themeIndex = Number(e.target.dataset.theme || '0');
          applyTheme(themeIndex);

          const c = e.target.querySelector?.('.count');
          if(c && !c.dataset.done){
            c.dataset.done = '1';
            animateCount(c);
          }
        }
      }
    }, { threshold: 0.60 });

    document.querySelectorAll('.panel').forEach(p => panelIO.observe(p));

    // --- FotoÄŸraf Ã§erÃ§evesi: kÄ±rpmayÄ± azalt + daha alÃ¢kalÄ± sÃ¼slemeler ---
    const fileInput = document.getElementById('file');
    const makeBtn = document.getElementById('make');
    const dlBtn = document.getElementById('download');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    const zoomEl = document.getElementById('zoom');
    const panXEl = document.getElementById('panX');
    const panYEl = document.getElementById('panY');

    const state = {
      img: null,
      composedUrl: null,
      zoom: 1,
      panX: 0,
      panY: 0,
    };

    function drawPlaceholder(){
      ctx.clearRect(0,0,canvas.width, canvas.height);
      const g = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
      g.addColorStop(0, 'rgba(20,100,165,.16)');
      g.addColorStop(1, 'rgba(45,204,205,.14)');
      ctx.fillStyle = g;
      ctx.fillRect(0,0,canvas.width, canvas.height);

      ctx.fillStyle = 'rgba(11,27,43,.82)';
      ctx.font = '900 54px Inter, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('FotoÄŸraf seÃ§ince burada gÃ¶rÃ¼necek', canvas.width/2, canvas.height/2 - 10);
      ctx.fillStyle = 'rgba(11,27,43,.65)';
      ctx.font = '700 34px Inter, system-ui, sans-serif';
      ctx.fillText('ğŸ“·  ğŸ„  âœ¨', canvas.width/2, canvas.height/2 + 55);
    }

    drawPlaceholder();

    function roundRect(c, x, y, w, h, r){
      const rr = Math.min(r, w/2, h/2);
      c.beginPath();
      c.moveTo(x+rr, y);
      c.arcTo(x+w, y, x+w, y+h, rr);
      c.arcTo(x+w, y+h, x, y+h, rr);
      c.arcTo(x, y+h, x, y, rr);
      c.arcTo(x, y, x+w, y, rr);
      c.closePath();
    }

    function drawCover(img){
      // cover (arka plan iÃ§in)
      const cw = canvas.width, ch = canvas.height;
      const iw = img.naturalWidth, ih = img.naturalHeight;
      const ir = iw/ih, cr = cw/ch;
      let sx, sy, sw, sh;
      if(ir > cr){ sh = ih; sw = ih*cr; sx = (iw - sw)/2; sy = 0; }
      else { sw = iw; sh = iw/cr; sx = 0; sy = (ih - sh)/2; }
      ctx.drawImage(img, sx, sy, sw, sh, 0, 0, cw, ch);
    }

    function drawContain(img){
      // contain (kÄ±rpmayÄ± azaltmak iÃ§in)
      const cw = canvas.width, ch = canvas.height;
      const iw = img.naturalWidth, ih = img.naturalHeight;
      const scale = Math.min(cw/iw, ch/ih) * state.zoom;
      const dw = iw*scale;
      const dh = ih*scale;

      // panX/panY -1..1 aralÄ±ÄŸÄ±nda, kalan boÅŸluÄŸa gÃ¶re kaydÄ±r
      const maxX = Math.max(0, (cw - dw)/2);
      const maxY = Math.max(0, (ch - dh)/2);
      const dx = (cw - dw)/2 + state.panX * maxX;
      const dy = (ch - dh)/2 + state.panY * maxY;

      ctx.drawImage(img, dx, dy, dw, dh);
    }

    function drawGarland(){
      // Ãœstte ÅŸÄ±k Ä±ÅŸÄ±k zinciri + birkaÃ§ yÄ±ldÄ±z
      ctx.save();
      ctx.lineWidth = 10;
      ctx.strokeStyle = 'rgba(0,0,0,.18)';
      ctx.beginPath();
      ctx.moveTo(90, 140);
      ctx.bezierCurveTo(canvas.width*0.30, 60, canvas.width*0.70, 230, canvas.width-90, 140);
      ctx.stroke();

      const bulbs = 11;
      const colors = ['rgba(214,31,38,.95)','rgba(246,195,67,.95)','rgba(31,122,74,.95)','rgba(45,204,205,.95)'];
      for(let i=0;i<bulbs;i++){
        const t = i/(bulbs-1);
        const x = 90 + (canvas.width-180)*t;
        const y = 140 + Math.sin(t*Math.PI)*58;
        const r = 16;
        const col = colors[i % colors.length];
        const gg = ctx.createRadialGradient(x-4,y-5,4,x,y,r);
        gg.addColorStop(0,'rgba(255,255,255,.98)');
        gg.addColorStop(1,col);
        ctx.fillStyle = gg;
        ctx.beginPath();
        ctx.arc(x,y,r,0,Math.PI*2);
        ctx.fill();
      }

      // ufak yÄ±ldÄ±zlar
      function star(cx, cy, spikes, outerR, innerR){
        let rot = Math.PI/2*3;
        let x = cx;
        let y = cy;
        const step = Math.PI/spikes;
        ctx.beginPath();
        ctx.moveTo(cx, cy - outerR);
        for(let i=0;i<spikes;i++){
          x = cx + Math.cos(rot) * outerR;
          y = cy + Math.sin(rot) * outerR;
          ctx.lineTo(x,y);
          rot += step;

          x = cx + Math.cos(rot) * innerR;
          y = cy + Math.sin(rot) * innerR;
          ctx.lineTo(x,y);
          rot += step;
        }
        ctx.lineTo(cx, cy - outerR);
        ctx.closePath();
      }

      ctx.fillStyle = 'rgba(246,195,67,.92)';
      star(140, 260, 5, 16, 7); ctx.fill();
      star(canvas.width-160, 250, 5, 14, 6); ctx.fill();

      ctx.restore();
    }

    function drawPineCorners(){
      // KÃ¶ÅŸelerde minimalist Ã§am dalÄ± (alakasÄ±z sÃ¼sleri kaldÄ±rdÄ±k)
      ctx.save();
      ctx.globalAlpha = 0.95;

      function pineCluster(x, y, flip){
        ctx.save();
        ctx.translate(x,y);
        if(flip) ctx.scale(-1,1);

        const greens = ['rgba(31,122,74,.88)','rgba(22,92,55,.86)','rgba(45,120,80,.82)'];
        for(let i=0;i<10;i++){
          ctx.fillStyle = greens[i%greens.length];
          ctx.beginPath();
          ctx.moveTo(0,0);
          ctx.quadraticCurveTo(70 + i*6, 18 + i*4, 160 + i*8, 70 + i*10);
          ctx.quadraticCurveTo(80 + i*5, 60 + i*6, 0, 0);
          ctx.closePath();
          ctx.fill();
        }

        // kÃ¼Ã§Ã¼k kÄ±rmÄ±zÄ± top
        const bx = 120, by = 110;
        const r = 20;
        const gg = ctx.createRadialGradient(bx-6,by-7,6,bx,by,r);
        gg.addColorStop(0,'rgba(255,255,255,.95)');
        gg.addColorStop(1,'rgba(214,31,38,.95)');
        ctx.fillStyle = gg;
        ctx.beginPath();
        ctx.arc(bx,by,r,0,Math.PI*2);
        ctx.fill();

        // kÃ¼Ã§Ã¼k altÄ±n top
        const bx2 = 70, by2 = 145;
        const r2 = 16;
        const gg2 = ctx.createRadialGradient(bx2-5,by2-6,5,bx2,by2,r2);
        gg2.addColorStop(0,'rgba(255,255,255,.95)');
        gg2.addColorStop(1,'rgba(246,195,67,.95)');
        ctx.fillStyle = gg2;
        ctx.beginPath();
        ctx.arc(bx2,by2,r2,0,Math.PI*2);
        ctx.fill();

        ctx.restore();
      }

      pineCluster(40, 40, false);
      pineCluster(canvas.width-40, 40, true);
      ctx.restore();
    }

    function drawFrame(){
      const pad = 38;
      const r = 52;

      ctx.save();
      ctx.lineWidth = 16;
      const g = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
      g.addColorStop(0, 'rgba(0,68,129,.92)');
      g.addColorStop(.50, 'rgba(45,204,205,.82)');
      g.addColorStop(1, 'rgba(246,195,67,.82)');
      ctx.strokeStyle = g;

      roundRect(ctx, pad, pad, canvas.width-pad*2, canvas.height-pad*2, r);
      ctx.stroke();

      ctx.lineWidth = 7;
      ctx.strokeStyle = 'rgba(255,255,255,.38)';
      roundRect(ctx, pad+20, pad+20, canvas.width-(pad+20)*2, canvas.height-(pad+20)*2, r-12);
      ctx.stroke();

      ctx.restore();

      drawGarland();
      drawPineCorners();
    }

    function drawText(){
      // Daha profesyonel: Inter Black, stroke + fill ile okunaklÄ±
      const main = 'MÄ°M RAPORLAMA HATIRASI';
      const year = '2025';

      ctx.save();

      // alt bant
      ctx.fillStyle = 'rgba(255,255,255,.62)';
      roundRect(ctx, 64, canvas.height-210, canvas.width-128, 150, 34);
      ctx.fill();

      // Ã¼stte ince Ã§izgi
      ctx.strokeStyle = 'rgba(0,0,0,.08)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(92, canvas.height-160);
      ctx.lineTo(canvas.width-92, canvas.height-160);
      ctx.stroke();

      // ana yazÄ±
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.shadowColor = 'rgba(0,0,0,.18)';
      ctx.shadowBlur = 10;
      ctx.shadowOffsetY = 6;

      ctx.font = '900 58px Inter, system-ui, sans-serif';
      const y = canvas.height - 142;

      // Stroke (koyu) + Fill (BBVA/altÄ±n degrade)
      ctx.lineWidth = 10;
      ctx.strokeStyle = 'rgba(11,27,43,.75)';
      ctx.strokeText(main, canvas.width/2, y);

      const gg = ctx.createLinearGradient(0, y-30, canvas.width, y+30);
      gg.addColorStop(0, 'rgba(0,68,129,.95)');
      gg.addColorStop(.55, 'rgba(20,100,165,.95)');
      gg.addColorStop(1, 'rgba(246,195,67,.95)');
      ctx.fillStyle = gg;
      ctx.fillText(main, canvas.width/2, y);

      // yÄ±l
      ctx.shadowBlur = 0;
      ctx.shadowOffsetY = 0;
      ctx.font = '800 34px Inter, system-ui, sans-serif';
      ctx.fillStyle = 'rgba(11,27,43,.72)';
      ctx.fillText(year, canvas.width/2, canvas.height - 86);

      ctx.restore();
    }

    function compose(){
      if(!state.img) return;
      ctx.clearRect(0,0,canvas.width, canvas.height);

      // 1) Arka plan: foto cover + blur
      ctx.save();
      ctx.filter = 'blur(26px)';
      drawCover(state.img);
      ctx.restore();

      // 2) Arka planÄ±n Ã¼stÃ¼ne hafif renk/vignette
      const bg = ctx.createLinearGradient(0,0,0,canvas.height);
      bg.addColorStop(0, 'rgba(0,68,129,.20)');
      bg.addColorStop(1, 'rgba(0,0,0,.20)');
      ctx.fillStyle = bg;
      ctx.fillRect(0,0,canvas.width, canvas.height);

      // 3) Ã–ndeki asÄ±l foto: contain (kÄ±rpmayÄ± azaltÄ±r)
      ctx.save();
      ctx.globalAlpha = 0.98;
      drawContain(state.img);
      ctx.restore();

      // 4) Ã§erÃ§eve + yazÄ±
      drawFrame();
      drawText();

      state.composedUrl = canvas.toDataURL('image/png');
      dlBtn.disabled = false;
    }

    function updateStateFromSliders(){
      state.zoom = Number(zoomEl?.value || 1);
      state.panX = Number(panXEl?.value || 0);
      state.panY = Number(panYEl?.value || 0);
      if(state.img) compose();
    }

    zoomEl?.addEventListener('input', updateStateFromSliders);
    panXEl?.addEventListener('input', updateStateFromSliders);
    panYEl?.addEventListener('input', updateStateFromSliders);

    fileInput?.addEventListener('change', (e) => {
      const file = e.target.files?.[0];
      dlBtn.disabled = true;
      state.composedUrl = null;

      if(!file){ makeBtn.disabled = true; drawPlaceholder(); return; }
      makeBtn.disabled = false;

      const img = new Image();
      img.onload = () => {
        state.img = img;
        // reset sliderlar
        if(zoomEl) zoomEl.value = '1';
        if(panXEl) panXEl.value = '0';
        if(panYEl) panYEl.value = '0';
        state.zoom = 1; state.panX = 0; state.panY = 0;
        compose();
      };
      img.onerror = () => { alert('GÃ¶rsel okunamadÄ±. BaÅŸka bir fotoÄŸraf dener misin?'); };
      img.src = URL.createObjectURL(file);
    });

    makeBtn?.addEventListener('click', () => { if(state.img) compose(); });

    dlBtn?.addEventListener('click', () => {
      if(!state.composedUrl) return;
      const a = document.createElement('a');
      a.href = state.composedUrl;
      a.download = 'mim-raporlama-hatirasi.png';
      document.body.appendChild(a);
      a.click();
      a.remove();
    });

    // Ä°lk tema
    applyTheme(0);
  </script>
</body>
</html>
